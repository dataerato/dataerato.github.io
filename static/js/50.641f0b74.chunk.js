(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[50],{121:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return v}));a(364);var n=a(365),i=(a(332),a(325)),r=a(79),l=a(75),s=a(11),o=a(27),p=a(28),c=a(29),d=a(30),u=a(1),f=a.n(u),h=a(5),v=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).draw=function(t){if(!document.getElementById(t.id+"-svg")){console.log("\u4e0d\u5b58\u5728");var e=t.info,a=t.info.values.map((function(t){return t.replace(",","")})),n=[],i=new Map;i.clear();var o=e.values.sort((function(t,e){return parseFloat(t)-parseFloat(e)}));o=o.map((function(t){return parseFloat(t)}));for(var p=parseFloat((Math.max.apply(Math,Object(s.a)(o))-Math.min.apply(Math,Object(s.a)(o)))/20),c=0;c<20;c++)i.set(c,0);for(c=0;c<o.length-1;c++){var d=parseInt((o[c]-Math.min.apply(Math,Object(s.a)(o)))/p);i.set(d,i.get(d)+1)}i.set(19,i.get(19)+1);var u,f=Object(l.a)(i);try{for(f.s();!(u=f.n()).done;){var v=Object(r.a)(u.value,2),x=v[0],m=v[1],y={};y.index=x,y.value=m,n.push(y)}}catch(V){f.e(V)}finally{f.f()}var b=0,g=0,M=0,I=0,j=196-I-g,w=36-b-M,O=h.scaleBand().range([0,j]),F=h.scaleLinear().range([w,0]);O.domain(n.map((function(t){return t.index}))),F.domain([0,Math.max.apply(Math,Object(s.a)(i.values()))]);var N=h.brushX().extent([[0,0],[j,w]]).on("brush",(function(){if(h.select("#"+t.id+"-xBrushInit").remove(),!h.event.selection)return;null===h.event.selection&&(h.event.selection=[0,j]);var e,i,r,l,c,d=null;0===(d=O.domain().filter((function(t){return h.event.selection[0]<=O(t)&&O(t)<=h.event.selection[1]}))).length&&(d=O.domain().filter((function(t){return h.event.selection[0]<=O(t)})));h.event.selection[0]!=h.event.selection[1]?(1===d.length?(e=d[0],i=d[0]+1):(e=d[0],i=d[d.length-1]),r=(i+1)*p+Math.min.apply(Math,Object(s.a)(o)),l=(0===e?0:e-1)*p+Math.min.apply(Math,Object(s.a)(o)),c=a.filter((function(t){return t>=l&&t<=r})),(isNaN(l)||isNaN(r))&&(r="",l="",c=[])):(e=0,i=0,r="",l="",c=[]);n.slice(e,i);h.selectAll("#"+t.id+"-textpostion").remove();var u=h.select("#"+t.id).append("div").attr("id",t.id+"-textpostion");u.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","left").text(""===l?l:l.toFixed(2)).attr("id",t.id+"minValue"),u.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","right").text(""===r?r:r.toFixed(2)).attr("id",t.id+"maxValue");var f=t.filters;t.filters[t.filterIndex].value=c,t.filters[t.filterIndex].type="equal",t.filters[t.filterIndex].value1=[l,r],t.filters[t.filterIndex].brushLocation=[h.event.selection[0],h.event.selection[1]],console.log("filters-brush-1",t.filters),t.updateFilters(f),t.updateFiltersChangeFlag(!0)})),B=h.select("#"+t.id).append("svg").attr("width",j+I+g).attr("height",w+b+M).attr("id",t.id+"-svg");B.append("rect").attr("width",j).attr("height",w).attr("x","0").attr("y","0").attr("fill","#f0f0f0");var E=B.append("g").attr("class","context");!function(t,e){var a=h.scalePow().range([t.length/10,0]).domain([t.length,0]).exponent(.5),n=e[1]-e[0];0===n&&(n=j);var i=Math.ceil(Math.abs(a(n)));t.filter((function(t,e){return e%i===0})).map((function(t){return t.index}))}(n,[0,j]),E.selectAll(".subBar").data(n).enter().append("rect").classed("subBar",!0).attr("height",(function(t){return w-F(t.value)})).attr("width",(function(t){return O.bandwidth()})).attr("x",(function(t){return O(t.index)})).attr("y",(function(t){return F(t.value)})).attr("fill","#777"),E.append("g").attr("class","x brush"+Math.random()).call(N).selectAll("rect").attr("y",0).attr("width",j).attr("height",w);var L=void 0==t.filters[t.filterIndex].brushLocation?0:t.filters[t.filterIndex].brushLocation[0],k=void 0==t.filters[t.filterIndex].brushLocation?196:t.filters[t.filterIndex].brushLocation[1];0===L&&196===k||E.append("rect").attr("class","xBrushInit").attr("id",t.id+"-xBrushInit").call(N).attr("x",L).attr("y",0).attr("width",k-L).attr("height",w),h.selectAll("#"+t.id+"-textpostion").remove();var z=h.select("#"+t.id).append("div").attr("id",t.id+"-textpostion"),A=void 0==t.filters[t.filterIndex].value1?Math.max.apply(Math,Object(s.a)(a)):t.filters[t.filterIndex].value1[1],D=void 0==t.filters[t.filterIndex].value1?Math.min.apply(Math,Object(s.a)(a)):t.filters[t.filterIndex].value1[0];z.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","left").text(D.toFixed(2)).attr("id",t.id+"minValue"),z.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","right").text(A.toFixed(2)).attr("id",t.id+"maxValue")}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.draw(this.props)}},{key:"componentDidUpdate",value:function(){this.draw(this.props)}},{key:"render",value:function(){this.props.info.values;var t=this.props.info.field;return f.a.createElement("div",{className:"NumericalFilter"},f.a.createElement("div",{className:"topicContent"},f.a.createElement(i.a,{title:t},f.a.createElement("p",{className:"fieldText"},t))),f.a.createElement("div",{className:"topicDetails topicDetailsSales",id:this.props.id,style:{height:"60px",overflow:"hidden"}}),f.a.createElement(n.a,null))}}]),a}(f.a.Component)}}]);
//# sourceMappingURL=50.641f0b74.chunk.js.map